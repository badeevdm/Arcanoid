!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="build/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=document.getElementById("game-field"),r=n.getContext("2d"),s={canvas:n,ctx:n.getContext("2d")};function a(t,e,i,n,s){r.fillStyle=s,r.fillRect(t,e,i,n)}function o(t,e,i,n,s,a){r.beginPath(),r.arc(t,e,i,0,n,s),r.fillStyle=a,r.fill(),r.closePath()}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.x=this.canvas.width/2-55,this.y=this.canvas.height-20,this.width=110,this.height=20,this.color="#F44336"}var e,i,n;return e=t,(i=[{key:"draw",value:function(){a(this.x,this.y,this.width,this.height,this.color)}},{key:"move",value:function(t){var e=t.clientX,i=t.clientY;e-this.width/2>this.canvas.offsetParent.offsetLeft&&e+this.width/2<this.canvas.offsetParent.offsetLeft+this.canvas.width&&i>this.canvas.offsetParent.offsetTop&&i<this.canvas.offsetParent.offsetTop+this.canvas.height&&(this.x=e-this.canvas.offsetParent.offsetLeft-this.width/2)}},{key:"bigPlatform",value:function(t){var e=this;this.x=this.x-t/2,this.width=110+t/2,i&&clearTimeout(i);var i=setTimeout(function(){e.width=110},5e3)}},{key:"smallPlatform",value:function(t){var e=this;this.x=this.x+t/2,this.width=110-t/2,i&&clearTimeout(i);var i=setTimeout(function(){e.width=110},5e3)}}])&&h(e.prototype,i),n&&h(e,n),t}();function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.colors=["#ff6f00","#009688","#FFC107","#ff6f00","#009688"],this.color,this.arr=[],this.w=135,this.h=25,this.row=e,this.col=i,this.bonus=["fastBall","slowBall","bigPlatform","smallPlatform"]}var e,i,n;return e=t,(i=[{key:"init",value:function(){for(var t=0;t<=this.col-1;t++){this.arr[t]=[];for(var e=0;e<=this.row-1;e++){var i=!1;Math.round(100*Math.random())>65&&(i=this.bonus[Math.round(this.bonus.length*Math.random())]),this.arr[t][e]={x:0,y:0,w:this.w,h:this.h,state:1,color:this.colors[e],bonus:i||!1}}}}},{key:"draw",value:function(){for(var t=0;t<=this.col-1;t++)for(var e=0;e<=this.row-1;e++)if(this.arr[t][e].state){var i=this.arr[t][e].x,n=this.arr[t][e].y;i=t*(this.w+10)+5+10,n=e*(this.h+10)+5+10,this.arr[t][e].x=i,this.arr[t][e].y=n,a(i,n,this.w,this.h,this.arr[t][e].color)}}}])&&u(e.prototype,i),n&&u(e,n),t}();function c(){var t=new Audio;t.src="./sound/Explosion10.wav",t.play()}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.radius=10,this.x=e.width/2,this.y=e.height-50,this.speed=.5,this.dx=1,this.dy=-1,this.canvas=e}var e,i,n;return e=t,(i=[{key:"draw",value:function(){o(this.x,this.y,this.radius,2*Math.PI,!0,"black")}},{key:"move",value:function(){return this.y+this.radius+this.dy>this.canvas.height?(this.radius=0,(t=new Audio).src="./sound/Shut_Down4.wav",t.play(),!0):(this.y+this.radius<this.radius&&(c(),this.dy=-this.dy),this.x+this.radius+this.dx>this.canvas.width&&(c(),this.dx=-this.dx),this.x+this.radius+this.dx<this.radius&&(c(),this.dx=-this.dx),this.x=this.x+this.speed*this.dx,this.y=this.y+this.speed*this.dy,o(this.x,this.y,this.radius,2*Math.PI,!0,"black"),!1);var t}},{key:"fastSpeed",value:function(t){var e=this;this.speed=t,setTimeout(function(){e.speed=1},5e3)}},{key:"lowSpeed",value:function(t){var e=this;this.speed=t,setTimeout(function(){e.speed=1},5e3)}}])&&d(e.prototype,i),n&&d(e,n),t}();function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#ff1744",this.fall=.75,this.x=e.x+e.w/2,this.y=e.y+e.h/2,this.radius=e.h/2,this.typeBonus=e.bonus}var e,i,n;return e=t,(i=[{key:"draw",value:function(){"fastBall"===this.typeBonus&&(this.color="#ff1744"),"slowBall"===this.typeBonus&&(this.color="#00897b"),"smallPlatform"===this.typeBonus&&(this.color="#ffee58"),"bigPlatform"===this.typeBonus&&(this.color="#3d5afe"),this.y=this.y+this.fall,o(this.x,this.y,this.radius,2*Math.PI,!1,this.color)}}])&&v(e.prototype,i),n&&v(e,n),t}(),p=0;function m(t,e,i,n,s){for(var a=0;a<e.arr.length;a++)for(var o=0;o<e.arr[a].length;o++)e.arr[a][o].state&&i.x>e.arr[a][o].x&&i.x<e.arr[a][o].x+e.w&&i.y>e.arr[a][o].y&&i.y<e.arr[a][o].y+e.h&&(c(),p+=10,i.dy=-i.dy,e.arr[a][o].state=0,e.arr[a][o].bonus&&n.push(new w(e.arr[a][o])));var h,l,u,f;i.y>=s.y&&i.x>=s.x&&i.x<=s.x+s.width&&i.y<s.y+s.height&&(i.dy=-i.dy),n.forEach(function(e,n,r){var a;e.x>s.x&&e.x<s.x+s.width&&e.y>s.y&&e.y<s.y+s.height&&((a=new Audio).src="./sound/Beep3.wav",a.play(),"fastBall"===e.typeBonus&&i.fastSpeed(1.5),"slowBall"===e.typeBonus&&i.lowSpeed(.5),"bigPlatform"===e.typeBonus&&s.bigPlatform(50),"smallPlatform"===e.typeBonus&&s.smallPlatform(30),r.splice(n,1)),e.y>t.height&&r.splice(n,1)}),h="Ваш счет: ".concat(p),l="15px Arial",u=500,f=480,r.font=l,r.fillText(h,u,f)}var x=s.canvas,b=new f(5,4),g=new y(x),P=new l(x),k=[],B=(document.getElementById("display"),document.querySelector(".overflow")),T=document.getElementById("state");function E(){b.init(),b.draw(),g.draw(),P.draw()}document.addEventListener("mousemove",P.move.bind(P)),T.addEventListener("click",function(){B.classList.add("hide"),function(){E();var t=setInterval(function(){s.ctx.clearRect(0,0,x.width,x.height),b.draw(),P.draw(),g.move(),m(x,b,g,k,P),k&&k.forEach(function(t){t.draw()}),g.move()&&(clearInterval(t),B.children[0].children[0].innerHTML="Game Over",T.innerHTML="Заново",B.classList.remove("hide"),T.addEventListener("click",function(){window.location.reload()}))},10)}()}),E()}]);